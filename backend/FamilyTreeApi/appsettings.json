{
  "ConnectionStrings": {
    "default": "Host=mainDb;Port=5432;Database=FamilyTree;Username=postgres;Password=__REDpark!12;Pooling=true;Minimum Pool Size=1;Maximum Pool Size=15;Connection Idle Lifetime=120;Connection Pruning Interval=10;Keepalive=15;Timeout=30;Command Timeout=30;Cancellation Timeout=5000;No Reset On Close=true",
    "redis": "Redis2:6379,abortConnect=false,connectTimeout=15000,syncTimeout=15000,connectRetry=5,defaultDatabase=0"
  },
  "Serilog": {
    "Using": [
      "Serilog.Enrichers.ClientInfo",
      "Serilog.Sinks.Console",
      "Serilog.Sinks.File"
    ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning",
        "Microsoft.AspNetCore.SignalR": "Warning",
        "Microsoft.AspNetCore.Http.Connections": "Warning",
        "Services": "Information"
      }
    },
    "Enrich": [
      "FromLogContext",
      "WithExceptionDetails",
      "WithClientIp",
      "WithClientAgent"
    ],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u6}] {Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "./Logs/log.txt",
          "formatter": "Serilog.Formatting.Json.JsonFormatter, Serilog",
          "rollingInterval": "Day",
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u6}] {Message:lj}{NewLine}{Exception}"
        }
      }
    ]
  },

  "redisInstance": "familytree:",
  "Redis": {
    "Enabled": true,
    "InstanceName": "familytree:",
    "ConnectionString": "Redis2:6379,abortConnect=false,connectTimeout=15000,syncTimeout=15000",
    "ChannelPrefix": "familytree-",
    "User": "",
    "Password": "",
    "RedisConnections": [ "localhost:6379" ],
    "MaxPayloadSizeBytes": 5242880,
    "CircuitBreakerFailureThreshold": 5,
    "CircuitBreakerDurationSeconds": 30
  },


  "Cors": "http://localhost:5000,http://localhost:4200",

  "JwtSettings": {
    "validationParameters": {
      "ValidateIssuer": true,
      "ValidateAudience": true,
      "ValidateLifetime": true,
      "ValidateIssuerSigningKey": true,
      "ValidIssuer": "https://localhost:7155",
      "ValidAudience": "http://localhost:4200",
      "ClockSkew": 5,
      "LifeTimeInMinutes": 15
    },
    "tokenOptions": {
      "bearerTokenLifeTimeStr": "00:00:15:00",
      "refreshTokenLifeTimeStr": "30:00:00:00",
      "signerTokenLifetimeStr": "30:00:00:00",
      "refreshTokenEncryptionKey": "FamilyTree123456789abcdefghijk",
      "bearerTokenKeyStr": "FamilyTree@#$%*&_1234567890_1!_2@",
      "signerTokenKeyStr": "FamilyTreeMe%*&_1234567890_1!_2@"
    }
  },

  "IdentityOptions": {
    "signInOptions": {
      "RequireConfirmedAccount": false,
      "RequireConfirmedEmail": false,
      "RequireConfirmedPhoneNumber": false
    },
    "userOptions": {
      "requireUniqueEmail": true
    },
    "lockoutOptions": {
      "AllowedForNewUsers": true,
      "MaxFailedAccessAttempts": 5,
      "DefaultLockoutTimeSpan": "00:30:00"
    },
    "passwordOptions": {
      "RequireDigit": true,
      "RequireLowercase": true,
      "RequireUppercase": true,
      "RequireNonAlphanumeric": false,
      "RequiredLength": 8,
      "RequiredUniqueChars": 1
    }
  },
  "Anthropic": {
    "ApiKey": "your-anthropic-api-key-here"
  },

  "LibreTranslate": {
    "Enabled": true,
    "BaseUrl": "http://localhost:5050",
    "ApiKey": null,
    "TimeoutSeconds": 10,
    "RetryCount": 3,
    "CircuitBreakerFailureThreshold": 5,
    "CircuitBreakerDurationSeconds": 30
  },

  "StorageConfiguration": {
    "StorageType": "LocalStorage",
    "CompressionEnabled": true,
    "StorageCacheEnabled": true,
    "SmartCompressionEnabled": true,

    "LocalStorage": {
      "BasePath": "/var/www/familytree/media/",
      "BaseUrl": "https://api.yourapp.com",
      "SignedUrlPathTemplate": "/media/stream/{fileName}?token={token}&expires={expires}",
      "TokenSecret": "your-secret-key-minimum-32-characters-long!"
    },
    "AWS": {
      "AccessKey": "",
      "SecretKey": "",
      "Region": "us-east-1",
      "BucketName": "familytree-media",
      "BasePath": "uploads"
    },
    "Linode": {
      "AccessKey": "",
      "SecretKey": "",
      "S3Endpoint": "https://us-east-1.linodeobjects.com",
      "BucketName": "familytree-media",
      "BasePath": "uploads"
    },
    "Cloudflare": {
      "AccountId": "",
      "AccessKey": "",
      "SecretKey": "",
      "BucketName": "familytree-media",
      "BasePath": "uploads"
    }
  },

  "FamilyTreeSettings": {
    "DefaultOrganizationName": "Smith Family Tree",
    "AllowPublicRegistration": true,
    "MaxMediaFileSizeMB": 50,
    "SupportedLanguages": [ "en", "ar", "nob" ],
    "DefaultLanguage": "en",
    "EnableGedcomImport": true,
    "EnableGedcomExport": true
  },

  "AllowedHosts": "*"
}
