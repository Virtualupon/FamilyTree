<div class="nubian-auth">
  <!-- Animated Background Pattern -->
  <div class="nubian-auth__pattern"></div>

  <!-- Language Selector -->
  <div class="nubian-auth__language">
    <mat-form-field appearance="outline" class="language-select">
      <mat-select [value]="i18n.currentLang()" (selectionChange)="onLanguageChange($event.value)">
        @for (lang of i18n.supportedLanguages; track lang.code) {
          <mat-option [value]="lang.code">{{ lang.nativeName }}</mat-option>
        }
      </mat-select>
      <i class="fa-solid fa-globe" matPrefix aria-hidden="true"></i>
    </mat-form-field>
  </div>

  <div class="nubian-auth__card">
    <!-- Header with Logo -->
    <div class="nubian-auth__header">
      <div class="nubian-auth__logo">
        <i class="fa-solid fa-tree" aria-hidden="true"></i>
      </div>
      <h1>{{ 'app.title' | translate }} {{ 'app.platform' | translate }}</h1>
      <p>{{ 'auth.loginSubtitle' | translate }}</p>
    </div>

    <!-- Login Form -->
    <div class="nubian-auth__content">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="nubian-auth__form">
        <mat-form-field appearance="outline">
          <mat-label>{{ 'auth.username' | translate }}</mat-label>
          <input matInput type="email" formControlName="email" autocomplete="email">
          <i class="fa-solid fa-envelope" matPrefix aria-hidden="true"></i>
          <mat-error *ngIf="loginForm.get('email')?.hasError('required')">
            {{ 'validation.required' | translate }}
          </mat-error>
          <mat-error *ngIf="loginForm.get('email')?.hasError('email')">
            {{ 'validation.email' | translate }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{ 'auth.password' | translate }}</mat-label>
          <input matInput type="password" formControlName="password" autocomplete="current-password">
          <i class="fa-solid fa-lock" matPrefix aria-hidden="true"></i>
          <mat-error *ngIf="loginForm.get('password')?.hasError('required')">
            {{ 'validation.required' | translate }}
          </mat-error>
        </mat-form-field>

        <button
          mat-raised-button
          type="submit"
          class="nubian-auth__submit"
          [disabled]="loginForm.invalid || loading">
          @if (loading) {
            <mat-spinner diameter="20"></mat-spinner>
          } @else {
            <i class="fa-solid fa-right-to-bracket" aria-hidden="true"></i>
            <span>{{ 'auth.loginButton' | translate }}</span>
          }
        </button>
      </form>

      <div class="nubian-auth__footer">
        <p>{{ 'auth.noAccount' | translate }} <a routerLink="/register">{{ 'auth.registerHere' | translate }}</a></p>
      </div>
    </div>
  </div>
</div>
