<div class="help-dialog" role="dialog" aria-labelledby="help-dialog-title">
  <!-- Header -->
  <div class="help-header">
    <div class="help-title">
      <mat-icon aria-hidden="true">admin_panel_settings</mat-icon>
      <h2 id="help-dialog-title">{{ 'HELP.ADMIN.TITLE' | translate }}</h2>
    </div>
    <button
      mat-icon-button
      class="close-button"
      (click)="close()"
      [attr.aria-label]="'COMMON.CLOSE' | translate">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Tab Navigation -->
  <div class="help-tabs" role="tablist" [attr.aria-label]="'HELP.SECTIONS' | translate">
    @for (tab of tabs; track tab.id) {
      <button
        class="tab-btn"
        [class.active]="activeTab === tab.id"
        (click)="setActiveTab(tab.id)"
        (keydown)="onTabKeydown($event, tab.id)"
        role="tab"
        [attr.aria-selected]="activeTab === tab.id"
        [attr.aria-controls]="'tabpanel-' + tab.id"
        [id]="'tab-' + tab.id">
        <mat-icon aria-hidden="true">{{ tab.icon }}</mat-icon>
        <span>{{ tab.labelKey | translate }}</span>
      </button>
    }
  </div>

  <!-- Content Area -->
  <div class="help-content">
    <!-- Overview Tab -->
    @if (activeTab === 'overview') {
      <div class="tab-content" role="tabpanel" id="tabpanel-overview" aria-labelledby="tab-overview">
        <h3>{{ 'HELP.ADMIN.OVERVIEW.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.OVERVIEW.INTRO' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.OVERVIEW.RESPONSIBILITIES_TITLE' | translate }}</h4>
        <ul class="feature-list">
          <li>{{ 'HELP.ADMIN.OVERVIEW.RESP_1' | translate }}</li>
          <li>{{ 'HELP.ADMIN.OVERVIEW.RESP_2' | translate }}</li>
          <li>{{ 'HELP.ADMIN.OVERVIEW.RESP_3' | translate }}</li>
          <li>{{ 'HELP.ADMIN.OVERVIEW.RESP_4' | translate }}</li>
          <li>{{ 'HELP.ADMIN.OVERVIEW.RESP_5' | translate }}</li>
        </ul>
      </div>
    }

    <!-- Towns Tab -->
    @if (activeTab === 'towns') {
      <div class="tab-content" role="tabpanel" id="tabpanel-towns" aria-labelledby="tab-towns">
        <h3>{{ 'HELP.ADMIN.TOWNS.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.TOWNS.INTRO' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.TOWNS.ASSIGNED_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.TOWNS.ASSIGNED_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.TOWNS.SWITCH_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.TOWNS.SWITCH_DESC' | translate }}</p>
      </div>
    }

    <!-- Trees Tab -->
    @if (activeTab === 'trees') {
      <div class="tab-content" role="tabpanel" id="tabpanel-trees" aria-labelledby="tab-trees">
        <h3>{{ 'HELP.ADMIN.TREES.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.TREES.INTRO' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.TREES.CREATE_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.TREES.CREATE_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.TREES.SETTINGS_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.TREES.SETTINGS_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.TREES.MEMBERS_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.TREES.MEMBERS_DESC' | translate }}</p>
      </div>
    }

    <!-- People Tab -->
    @if (activeTab === 'people') {
      <div class="tab-content" role="tabpanel" id="tabpanel-people" aria-labelledby="tab-people">
        <h3>{{ 'HELP.ADMIN.PEOPLE.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.PEOPLE.INTRO' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.PEOPLE.ADD_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.PEOPLE.ADD_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.PEOPLE.EDIT_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.PEOPLE.EDIT_DESC' | translate }}</p>

        <div class="note-box" role="note">
          <div class="note-header">
            <mat-icon aria-hidden="true">translate</mat-icon>
            <span>{{ 'HELP.ADMIN.PEOPLE.NAMES_TITLE' | translate }}</span>
          </div>
          <p>{{ 'HELP.ADMIN.PEOPLE.NAMES_DESC' | translate }}</p>
        </div>
      </div>
    }

    <!-- Relationships Tab -->
    @if (activeTab === 'relationships') {
      <div class="tab-content" role="tabpanel" id="tabpanel-relationships" aria-labelledby="tab-relationships">
        <h3>{{ 'HELP.ADMIN.RELATIONSHIPS.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.RELATIONSHIPS.INTRO' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.RELATIONSHIPS.ADD_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.RELATIONSHIPS.ADD_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.RELATIONSHIPS.PENDING_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.RELATIONSHIPS.PENDING_DESC' | translate }}</p>
      </div>
    }

    <!-- Suggestions Tab -->
    @if (activeTab === 'suggestions') {
      <div class="tab-content" role="tabpanel" id="tabpanel-suggestions" aria-labelledby="tab-suggestions">
        <h3>{{ 'HELP.ADMIN.SUGGESTIONS.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.SUGGESTIONS.INTRO' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.SUGGESTIONS.QUEUE_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.SUGGESTIONS.QUEUE_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.SUGGESTIONS.ACTIONS_TITLE' | translate }}</h4>
        <div class="action-list">
          <div class="action-item approve">
            <mat-icon aria-hidden="true">check_circle</mat-icon>
            <span>{{ 'HELP.ADMIN.SUGGESTIONS.ACTION_APPROVE' | translate }}</span>
          </div>
          <div class="action-item reject">
            <mat-icon aria-hidden="true">cancel</mat-icon>
            <span>{{ 'HELP.ADMIN.SUGGESTIONS.ACTION_REJECT' | translate }}</span>
          </div>
          <div class="action-item info">
            <mat-icon aria-hidden="true">help</mat-icon>
            <span>{{ 'HELP.ADMIN.SUGGESTIONS.ACTION_INFO' | translate }}</span>
          </div>
        </div>

        <div class="tip-box" role="note">
          <div class="tip-header">
            <mat-icon aria-hidden="true">lightbulb</mat-icon>
            <span>{{ 'COMMON.BEST_PRACTICE' | translate }}</span>
          </div>
          <p>{{ 'HELP.ADMIN.SUGGESTIONS.BEST_PRACTICE' | translate }}</p>
        </div>
      </div>
    }

    <!-- Media Tab -->
    @if (activeTab === 'media') {
      <div class="tab-content" role="tabpanel" id="tabpanel-media" aria-labelledby="tab-media">
        <h3>{{ 'HELP.ADMIN.MEDIA.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.MEDIA.INTRO' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.MEDIA.UPLOAD_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.MEDIA.UPLOAD_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.MEDIA.TAG_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.MEDIA.TAG_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.MEDIA.PRIMARY_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.MEDIA.PRIMARY_DESC' | translate }}</p>
      </div>
    }

    <!-- Tree View Tab -->
    @if (activeTab === 'tree-view') {
      <div class="tab-content" role="tabpanel" id="tabpanel-tree-view" aria-labelledby="tab-tree-view">
        <h3>{{ 'HELP.ADMIN.TREE_VIEW.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.TREE_VIEW.INTRO' | translate }}</p>

        <div class="feature-cards">
          <div class="feature-card">
            <mat-icon aria-hidden="true">edit</mat-icon>
            <span>{{ 'HELP.ADMIN.TREE_VIEW.EDIT_MODE' | translate }}</span>
          </div>
          <div class="feature-card">
            <mat-icon aria-hidden="true">add_circle</mat-icon>
            <span>{{ 'HELP.ADMIN.TREE_VIEW.QUICK_ADD' | translate }}</span>
          </div>
        </div>
      </div>
    }

    <!-- Users Tab -->
    @if (activeTab === 'users') {
      <div class="tab-content" role="tabpanel" id="tabpanel-users" aria-labelledby="tab-users">
        <h3>{{ 'HELP.ADMIN.USERS.TITLE' | translate }}</h3>
        <p>{{ 'HELP.ADMIN.USERS.INTRO' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.USERS.INVITE_TITLE' | translate }}</h4>
        <p>{{ 'HELP.ADMIN.USERS.INVITE_DESC' | translate }}</p>

        <h4>{{ 'HELP.ADMIN.USERS.ROLES_TITLE' | translate }}</h4>
        <div class="role-list">
          <div class="role-item">
            <mat-icon aria-hidden="true">visibility</mat-icon>
            <span>{{ 'HELP.ADMIN.USERS.ROLE_VIEWER' | translate }}</span>
          </div>
          <div class="role-item">
            <mat-icon aria-hidden="true">rate_review</mat-icon>
            <span>{{ 'HELP.ADMIN.USERS.ROLE_CONTRIBUTOR' | translate }}</span>
          </div>
          <div class="role-item">
            <mat-icon aria-hidden="true">edit</mat-icon>
            <span>{{ 'HELP.ADMIN.USERS.ROLE_EDITOR' | translate }}</span>
          </div>
        </div>
      </div>
    }

    <!-- Tips Tab -->
    @if (activeTab === 'tips') {
      <div class="tab-content" role="tabpanel" id="tabpanel-tips" aria-labelledby="tab-tips">
        <h3>{{ 'HELP.ADMIN.TIPS.TITLE' | translate }}</h3>

        <div class="tips-grid">
          <div class="tip-card">
            <div class="tip-icon">
              <mat-icon aria-hidden="true">fact_check</mat-icon>
            </div>
            <div class="tip-title">{{ 'HELP.ADMIN.TIPS.TIP1_TITLE' | translate }}</div>
            <div class="tip-desc">{{ 'HELP.ADMIN.TIPS.TIP1_DESC' | translate }}</div>
          </div>

          <div class="tip-card">
            <div class="tip-icon">
              <mat-icon aria-hidden="true">translate</mat-icon>
            </div>
            <div class="tip-title">{{ 'HELP.ADMIN.TIPS.TIP2_TITLE' | translate }}</div>
            <div class="tip-desc">{{ 'HELP.ADMIN.TIPS.TIP2_DESC' | translate }}</div>
          </div>

          <div class="tip-card">
            <div class="tip-icon">
              <mat-icon aria-hidden="true">rule</mat-icon>
            </div>
            <div class="tip-title">{{ 'HELP.ADMIN.TIPS.TIP3_TITLE' | translate }}</div>
            <div class="tip-desc">{{ 'HELP.ADMIN.TIPS.TIP3_DESC' | translate }}</div>
          </div>

          <div class="tip-card">
            <div class="tip-icon">
              <mat-icon aria-hidden="true">description</mat-icon>
            </div>
            <div class="tip-title">{{ 'HELP.ADMIN.TIPS.TIP4_TITLE' | translate }}</div>
            <div class="tip-desc">{{ 'HELP.ADMIN.TIPS.TIP4_DESC' | translate }}</div>
          </div>
        </div>
      </div>
    }
  </div>

  <!-- Footer -->
  <div class="help-footer">
    <button mat-raised-button color="primary" (click)="close()">
      {{ 'HELP.CLOSE_BUTTON' | translate }}
    </button>
  </div>
</div>
